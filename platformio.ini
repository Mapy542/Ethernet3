; PlatformIO Project Configuration File for Ethernet3 Library
; 
; This file provides platform support for Arduino, ESP32, STM32 and other platforms
; Part of the Ethernet3 modernization plan - Phase 4: Platform Abstraction

[platformio]
default_envs = arduino_uno
description = Modernized Ethernet library with W5100/W5500 support, multi-instance architecture, and platform optimizations
lib_archive = false

; Arduino Uno/Nano/Mini (ATmega328P)
[env:arduino_uno]
platform = atmelavr
board = uno
framework = arduino
lib_deps = 
    SPI

; Arduino Mega (ATmega2560)
[env:arduino_mega]
platform = atmelavr
board = megaatmega2560
framework = arduino
lib_deps = 
    SPI

; Arduino Leonardo/Micro (ATmega32U4)
[env:arduino_leonardo]
platform = atmelavr
board = leonardo
framework = arduino
lib_deps = 
    SPI

; ESP32 Development Board
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
lib_deps = 
    SPI
build_flags = 
    -DESP32

; ESP8266 NodeMCU
[env:esp8266]
platform = espressif8266
board = nodemcuv2
framework = arduino
lib_deps = 
    SPI
build_flags = 
    -DESP8266

; STM32 Blue Pill (STM32F103C8)
[env:bluepill]
platform = ststm32
board = bluepill_f103c8
framework = arduino
lib_deps = 
    SPI
build_flags = 
    -DSTM32F1

; STM32 Nucleo F401RE
[env:nucleo_f401re]
platform = ststm32
board = nucleo_f401re
framework = arduino
lib_deps = 
    SPI
build_flags = 
    -DSTM32F4

; Raspberry Pi Pico
[env:pico]
platform = raspberrypi
board = pico
framework = arduino
lib_deps = 
    SPI
build_flags = 
    -DPICO

; Teensy 4.0
[env:teensy40]
platform = teensy
board = teensy40
framework = arduino
lib_deps = 
    SPI
build_flags = 
    -DTEENSY4

; Common library settings for all environments
[env]
lib_archive = false
lib_ldf_mode = chain+
monitor_speed = 115200

; Build flags for different features
build_flags = 
    -DARDUINO_ARCH_AVR  ; Default, overridden per platform
    -DETHERNET3_MULTICAST_SUPPORT
    -DETHERNET3_MULTI_INSTANCE_SUPPORT
    -DETHERNET3_W5100_SUPPORT
    -DETHERNET3_W5500_SUPPORT

; Test environment for running unit tests
[env:native]
platform = native
test_framework = unity
lib_deps = 
    unity
build_flags = 
    -DUNIT_TEST
    -DETHERNET3_TEST_MODE